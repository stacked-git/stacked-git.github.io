<!DOCTYPE html>
<html><head>
    <title>
         stg-refresh(1) &ndash;  Stacked Git
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="msapplication-TileColor" content="#603cba">
    <meta name="theme-color" content="#ffffff">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet" href="/css/stgit.css">
    <link rel="stylesheet" href="/css/chroma.css">
</head>
<body>
        <div><header>
  
  <a href="/">
    <img src="/stgit.svg" alt="Stacked Git logo">
  </a>
  
  <h3><a href="/">Stacked Git</a></h3>
  <nav>
    <ul>
      
      <li>
        <a href="/changelog/">
          
          Changelog
          
        </a>
      </li>
      
      <li>
        <a href="/man/">
          
          Man Pages
          
        </a>
      </li>
      
      <li>
        <a href="/guides/">
          
          Guides
          
        </a>
      </li>
      
      <li>
        <a href="/guides/tutorial/">
          
          Tutorial
          
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/">
          
          Repository
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/issues">
          
          Issue Tracker
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://github.com/stacked-git/stgit/releases">
          
          Releases
          <img src="/github.svg" alt="GitHub logo">
        </a>
      </li>
      
      <li>
        <a href="https://groups.google.com/d/forum/stgit">
          
          Forum
          <img src="/ext-link.svg" alt="external link">
        </a>
      </li>
      
    </ul>
  </nav>
</header>
<div>
<main>
  <h2>
    <a href="/man/stg-refresh/">
      stg-refresh(1)
    </a>
  </h2>






<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>stg-refresh - Incorporate worktree changes into current patch</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>stg refresh</em> [OPTIONS] [path]…​</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Include the latest work tree and index changes in the current patch. This
command generates a new git commit object for the patch; the old commit is no
longer visible.</p>
</div>
<div class="paragraph">
<p>Refresh will warn if the index is dirty, and require use of either the
<em>--index</em> or <em>--force</em> options to override this check. This is to prevent
accidental full refresh when only some changes were staged using git add
interactive mode.</p>
</div>
<div class="paragraph">
<p>You may optionally list one or more files or directories relative to the
current working directory; if you do, only matching files will be updated.</p>
</div>
<div class="paragraph">
<p>Behind the scenes, stg refresh first creates a new temporary patch with your
updates, and then merges that patch into the patch you asked to have refreshed.
If you asked to refresh a patch other than the topmost patch, there can be
conflicts; in that case, the temporary patch will be left for you to take care
of, for example with stg squash.</p>
</div>
<div class="paragraph">
<p>The creation of the temporary patch is recorded in a separate entry in the
patch stack log; this means that one undo step will undo the merge between the
other patch and the temp patch, and two undo steps will additionally get rid of
the temp patch.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">-u</dt>
<dt class="hdlist1">--update</dt>
<dd>
<p>Only update the current patch files</p>
</dd>
<dt class="hdlist1">-i</dt>
<dt class="hdlist1">--index</dt>
<dd>
<p>Instead of setting the patch top to the current contents of the worktree,
set it to the current contents of the index.</p>
</dd>
<dt class="hdlist1">-F</dt>
<dt class="hdlist1">--force</dt>
<dd>
<p>Instead of warning the user when some work has already been staged (such as
with git add interactive mode) force a full refresh.</p>
</dd>
<dt class="hdlist1">--conflicts[=&lt;policy&gt;]</dt>
<dd>
<p>Either &#34;allow&#34; or &#34;disallow&#34; pushing a patch with conflicts.</p>
<div class="paragraph">
<p>Using <code>--conflicts=allow</code> (or just <code>--conflicts</code>) allows pushing a patch that
may result in unresolved merge conflicts. The patch will be pushed and files
with conflicts will be left with conflict markers to be resolved manually; or
the operation undone with <code>stg undo --hard</code>. This is the default behavior and
also corresponds to the &#34;stgit.push.allow-conflicts&#34; variable being set to &#34;true&#34;.</p>
</div>
<div class="paragraph">
<p>Using <code>--conflicts=disallow</code> disallows pushing any patch that would result in
merge conflicts. The operation will stop on the last patch that can be pushed
without conflicts. This behavior can be configured by setting
&#34;stgit.push.allow-conflicts&#34; to &#34;false&#34;.</p>
</div>
</dd>
<dt class="hdlist1">-p &lt;patch&gt;</dt>
<dt class="hdlist1">--patch=&lt;patch&gt;</dt>
<dd>
<p>Refresh (applied) &lt;patch&gt; instead of the top patch</p>
</dd>
<dt class="hdlist1">-a &lt;note&gt;</dt>
<dt class="hdlist1">--annotate=&lt;note&gt;</dt>
<dd>
<p>Annotate the patch log entry with &lt;note&gt;</p>
</dd>
<dt class="hdlist1">--submodules</dt>
<dd>
<p>Include submodules in patch content</p>
</dd>
<dt class="hdlist1">--no-submodules</dt>
<dd>
<p>Exclude submodules in patch content</p>
</dd>
<dt class="hdlist1">-e</dt>
<dt class="hdlist1">--edit</dt>
<dd>
<p>Invoke editor for patch description</p>
</dd>
<dt class="hdlist1">-d</dt>
<dt class="hdlist1">--diff</dt>
<dd>
<p>Show diff when editing patch description</p>
</dd>
<dt class="hdlist1">-m &lt;message&gt;</dt>
<dt class="hdlist1">--message=&lt;message&gt;</dt>
<dd>
<p>Use message instead of invoking the editor</p>
</dd>
<dt class="hdlist1">-f &lt;path&gt;</dt>
<dt class="hdlist1">--file=&lt;path&gt;</dt>
<dd>
<p>Use the contents of file instead of invoking the editor. Use &#34;-&#34; to read
from stdin.</p>
</dd>
<dt class="hdlist1">--no-verify</dt>
<dd>
<p>Disable commit-msg hook</p>
</dd>
<dt class="hdlist1">-s[=&lt;value&gt;]</dt>
<dt class="hdlist1">--signoff[=&lt;value&gt;]</dt>
<dd>
<p>Add &#34;Signed-off-by&#34; message trailer.</p>
<div class="paragraph">
<p>The value is optional and defaults to the committer name and email. This option
may be provided multiple times.</p>
</div>
</dd>
<dt class="hdlist1">--ack[=&lt;value&gt;]</dt>
<dd>
<p>Add &#34;Acked-by&#34; message trailer.</p>
<div class="paragraph">
<p>The value is optional and defaults to the committer’s name and email. This
option may be provided multiple times.</p>
</div>
</dd>
<dt class="hdlist1">--review[=&lt;value&gt;]</dt>
<dd>
<p>Add &#34;Reviewed-by&#34; message trailer.</p>
<div class="paragraph">
<p>The value is optional and defaults to the committer’s name and email. This
option may be provided multiple times.</p>
</div>
</dd>
<dt class="hdlist1">--author=&lt;name-and-email&gt;</dt>
<dd>
<p>Set the author &#34;name &lt;email&gt;&#34;</p>
</dd>
<dt class="hdlist1">--authname=&lt;name&gt;</dt>
<dd>
<p>Set the author name</p>
</dd>
<dt class="hdlist1">--authemail=&lt;email&gt;</dt>
<dd>
<p>Set the author email</p>
</dd>
<dt class="hdlist1">--authdate=&lt;date&gt;</dt>
<dd>
<p>Set the date the patch was authored.</p>
<div class="paragraph">
<p>Use &#34;now&#34; to use the current time and date.</p>
</div>
</dd>
<dt class="hdlist1">--committer-date-is-author-date</dt>
<dd>
<p>Instead of using the current time as the committer date, use the author
date of the commit as the committer date.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stgit">StGit</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the StGit suite - see <a href="/man/stg">stg(1)</a></p>
</div>
</div>
</div>

</main>
<footer>
  <small>&copy; 2025 Stacked Git Authors</small>
</footer>
</div>
        </div>
    </body>
</html>
